//scalapackage coop.rchain.rholang.mint

//requires Pos, RhoSpec
new
  rl(`rho:registry:lookup`),
  stdlog(`rho:io:stdlog`),
  RhoSpecCh, PosCh,
  setup,
  test_find_pos_in_registry
in {
  new RhoSpecCh in {
    rl!(`rho:id:6wnujzcraztjfg941skrtbdkdgbko8nuaqihuhn15s66oz8ro5gwbb`, *RhoSpecCh) |
    rl!(`rho:id:w6koqnba5yr3f9hmtckihj4mj6q6wtre48w5j3n6nd314zwogyfmuf`, *PosCh) |
    for(@(_, RhoSpec) <- RhoSpecCh;
        @(_, Pos) <- PosCh) {
      @RhoSpec!("testSuite", *setup,
        [
          ("PoS can be found in registry", *test_find_pos_in_registry)
        ])
    }
  } |

  contract setup(retCh) = {
    retCh!([]) //nothing to setup so far
  } |

  contract test_find_pos_in_registry(rhoSpec, _, ackCh) = {
    //nothing to assert. If this succeeds it means that the PoS was found
    rhoSpec!("assert", true, "", *ackCh)
  }
}
